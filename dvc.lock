schema: '2.0'
stages:
  get_bdb_2024_data:
    cmd: kaggle competitions download -c nfl-big-data-bowl-2024 -p data/
    outs:
    - path: data/nfl-big-data-bowl-2024.zip
      hash: md5
      md5: d39d15812f2c6aa9450eaef71f71e601
      size: 292799779
  unzip_bdb_2024_data:
    cmd: unzip data/nfl-big-data-bowl-2024.zip -d data/bdb_2024/
    deps:
    - path: data/nfl-big-data-bowl-2024.zip
      hash: md5
      md5: d39d15812f2c6aa9450eaef71f71e601
      size: 292799779
    outs:
    - path: data/bdb_2024
      hash: md5
      md5: c7869f4305b74f791c1de31cdee7982d.dir
      size: 1611304510
      nfiles: 13
  prep_data:
    cmd: rye run python src/prep_data.py
    deps:
    - path: data/bdb_2024/
      hash: md5
      md5: c7869f4305b74f791c1de31cdee7982d.dir
      size: 1611304510
      nfiles: 13
    - path: src/prep_data.py
      hash: md5
      md5: 10041bd6fd4802cb7774fd82b33ee136
      size: 10674
    outs:
    - path: data/split_prepped_data/
      hash: md5
      md5: c8e24140d1d66ff0c9d74f83e20c2f87.dir
      size: 1121854953
      nfiles: 6
  precompute_datasets:
    cmd: rye run python src/datasets.py
    deps:
    - path: data/split_prepped_data/
      hash: md5
      md5: c8e24140d1d66ff0c9d74f83e20c2f87.dir
      size: 1121854953
      nfiles: 6
    - path: src/datasets.py
      hash: md5
      md5: 4fd2514059969096589c847a38c1e5c9
      size: 6878
    outs:
    - path: data/datasets/transformer/
      hash: md5
      md5: 13f8420b4e58627d0d1a63e15ac17b54.dir
      size: 6975828037
      nfiles: 3
    - path: data/datasets/zoo/
      hash: md5
      md5: b2385992e653994413c2c91b415a0684.dir
      size: 11079773462
      nfiles: 3
  precompute_datasets_with_play:
    cmd: rye run python src/datasets.py --advanced
    deps:
    - path: data/split_prepped_data/
      hash: md5
      md5: 01e3f324290aa4e90854dc25b0bd1eae.dir
      size: 877418035
      nfiles: 6
    - path: src/datasets.py
      hash: md5
      md5: ee862f2dc7f247ea41425dee9dcbcfa7
      size: 6850
    outs:
    - path: data/datasets/transformer_play/
      hash: md5
      md5: f6f49be8632e944c592dd49346d23971.dir
      size: 5862898230
      nfiles: 3
    - path: data/datasets/zoo_play/
      hash: md5
      md5: acc9b6f0da44c49c621434cc05b51053.dir
      size: 10565747262
      nfiles: 3
  train_transformer_models:
    cmd: rye run python src/train.py --model_type transformer
    deps:
    - path: data/datasets/transformer
      hash: md5
      md5: 13f8420b4e58627d0d1a63e15ac17b54.dir
      size: 6975828037
      nfiles: 3
    - path: src/datasets.py
      hash: md5
      md5: 4fd2514059969096589c847a38c1e5c9
      size: 6878
    - path: src/models.py
      hash: md5
      md5: 9e3857c7b61ee9874016c78d50938359
      size: 8073
    - path: src/train.py
      hash: md5
      md5: 742586813dca31bb4bd257116fd5201e
      size: 6945
    outs:
    - path: data/models/transformer/
      hash: md5
      md5: 5c4c321ddc0927571b9643c36e9c7b03.dir
      size: 3379424734
      nfiles: 60
  train_zoo_models:
    cmd: rye run python src/train.py --model_type zoo
    deps:
    - path: data/datasets/zoo/
      hash: md5
      md5: b2385992e653994413c2c91b415a0684.dir
      size: 11079773462
      nfiles: 3
    - path: src/datasets.py
      hash: md5
      md5: 4fd2514059969096589c847a38c1e5c9
      size: 6878
    - path: src/models.py
      hash: md5
      md5: 9e3857c7b61ee9874016c78d50938359
      size: 8073
    - path: src/train.py
      hash: md5
      md5: 742586813dca31bb4bd257116fd5201e
      size: 6945
    outs:
    - path: data/models/zoo/
      hash: md5
      md5: 8c927211676867d4947e87232f88e83e.dir
      size: 704709349
      nfiles: 60
  train_transformer_model_with_play:
    cmd: rye run python src/train.py --model_type transformer --advanced
    deps:
    - path: data/datasets/transformer_play/
      hash: md5
      md5: f6f49be8632e944c592dd49346d23971.dir
      size: 5862898230
      nfiles: 3
    - path: src/datasets.py
      hash: md5
      md5: ee862f2dc7f247ea41425dee9dcbcfa7
      size: 6850
    - path: src/models.py
      hash: md5
      md5: 345387ec02d74a874a4efb80278c991d
      size: 8064
    - path: src/train.py
      hash: md5
      md5: 9e0591fe6397b429bf11ef9e92c8ec9c
      size: 7108
    outs:
    - path: data/models/transformer_play/
      hash: md5
      md5: 1249597211bf34689abfa48757f1a10e.dir
      size: 903464642
      nfiles: 68
  pick_best_models:
    cmd: rye run python src/pick_best_models.py
    deps:
    - path: data/models/
      hash: md5
      md5: 187dfb8dbb0ee566abe1607d5dd5287e.dir
      size: 7464004267
      nfiles: 181
    - path: src/datasets.py
      hash: md5
      md5: 4fd2514059969096589c847a38c1e5c9
      size: 6878
    - path: src/models.py
      hash: md5
      md5: 9e3857c7b61ee9874016c78d50938359
      size: 8073
    - path: src/pick_best_models.py
      hash: md5
      md5: ebcce4c3933bbe5abc9b11e5ce5a62d3
      size: 2642
    outs:
    - path: data/best_models/
      hash: md5
      md5: e0e67b1ab515b3c6e45dfd4a46e0e411.dir
      size: 148140983
      nfiles: 6
  precompute_datasets_advanced:
    cmd: rye run python src/datasets.py --advanced
    deps:
    - path: data/split_prepped_data/
      hash: md5
      md5: c8e24140d1d66ff0c9d74f83e20c2f87.dir
      size: 1121854953
      nfiles: 6
    - path: src/datasets.py
      hash: md5
      md5: 4fd2514059969096589c847a38c1e5c9
      size: 6878
    outs:
    - path: data/datasets/transformer_advanced/
      hash: md5
      md5: 91388fa9b0cbe1e112b1e6df449328e9.dir
      size: 7348722431
      nfiles: 3
  train_transformer_model_advanced:
    cmd: rye run python src/train.py --model_type transformer --advanced
    deps:
    - path: data/datasets/transformer_advanced/
      hash: md5
      md5: 91388fa9b0cbe1e112b1e6df449328e9.dir
      size: 7348722431
      nfiles: 3
    - path: src/datasets.py
      hash: md5
      md5: 4fd2514059969096589c847a38c1e5c9
      size: 6878
    - path: src/models.py
      hash: md5
      md5: 9e3857c7b61ee9874016c78d50938359
      size: 8073
    - path: src/train.py
      hash: md5
      md5: 742586813dca31bb4bd257116fd5201e
      size: 6945
    outs:
    - path: data/models/transformer_advanced/
      hash: md5
      md5: 0fffbb36ec134b62f1ba4ac2bb4e5768.dir
      size: 3379870184
      nfiles: 61
